<dwSchemaUpdate>


    <!-- ACHTUNG ÄNDERUNGEN AB SOFORT ***UNTEN*** ANFÜGEN -->

	<changeSet date="2000-01-01">
		<statement>ALTER TABLE BLA ADD COLUMN BLUBB VARCHAR(200);
		</statement>
	</changeSet>
	<changeSet date="2011-08-31-10-00">
		<statement>alter table RS_TS;_EXEC_REPORT_NODE drop constraint
			FK92D72641A7E2ABF2
		</statement>
		<statement>drop table RS_TS_EXEC_REPORT_NODE;</statement>
		<statement>alter table RS_TS_EXEC_REPORT_NODE_A drop constraint
			FK39A6A5C339B81697;
		</statement>
		<statement>drop table RS_TS_EXEC_REPORT_NODE_A;</statement>
	</changeSet>
	<changeSet date="2011-09-01-10-00">
		<statement>ALTER TABLE RS_SCHED_ACTION_AS_FILE ADD (TEAMSPACE_ID
			NUMBER(19));
		</statement>
	</changeSet>
	<changeSet date="2011-09-02-10-00">
		<statement>ALTER TABLE RS_GROUP ADD (DESCRIPTION CLOB);
		</statement>
		<statement>ALTER TABLE RS_GROUP_A ADD (DESCRIPTION CLOB);
		</statement>
	</changeSet>
	<changeSet date="2011-09-03">
		<statement>
			create table RS_SCHED_EXECUTE_SCRIPT_JOB (
			ARGUMENTS
			VARCHAR2(255 CHAR),
			SCRIPT_ID NUMBER(19),
			ID NUMBER(19) not null,
			USER_ID NUMBER(19),
			primary key (ID)
			);
		</statement>
		<statement>
			alter table RS_SCHED_BASE_JOB_2_PROP
			add constraint
			FKAB4AE73A1F58916C
			foreign key (SCHED_EXECUTE_SCRIPT_JOB_ID)
			references RS_SCHED_EXECUTE_SCRIPT_JOB;
		</statement>
		<statement>
			alter table RS_SCHED_EXECUTE_SCRIPT_JOB
			add constraint
			FKBD89C4392A2742A7
			foreign key (ID)
			references RS_SCHED_JOB;
		</statement>
		<statement>
			alter table RS_SCHED_EXECUTE_SCRIPT_JOB
			add constraint
			FKBD89C439187DD093
			foreign key (USER_ID)
			references RS_USER;
		</statement>
	</changeSet>
	<!-- achtung hier fehlt was -->
	<changeSet date="2011-09-07-10-00">
		<statement>ALTER TABLE RS_DATASOURCE_P_DEF_2_MUL_DEF RENAME TO
			DATASOURCE_P_DF_2_ML_DEF;
		</statement>
		<statement>
			create table RS_DATASOURCE_P_DF_2_ML_DEF_A (
			REV
			number(10,0) not null,
			DATASOURCE_PARAM_DEF_id number(19,0) not null,
			multiDefaultValueSimpleData_id number(19,0) not null,
			REVTYPE
			number(3,0),
			primary key (REV, DATASOURCE_PARAM_DEF_id,
			multiDefaultValueSimpleData_id)
			);
		</statement>
		<statement>
			create table RS_DATASOURCE_P_INS_2_ML_VAL_A (
			REV
			number(10,0) not null,
			DATASOURCE_PARAM_INST_id number(19,0) not null,
			multi_Value_id number(19,0) not null,
			REVTYPE number(3,0),
			primary key
			(REV, DATASOURCE_PARAM_INST_id, multi_Value_id)
			);
		</statement>
		<statement>
			alter table RS_DATASOURCE_P_DF_2_ML_DEF_A
			add constraint
			FKB4FA4768BBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>
		<statement>
			alter table RS_DATASOURCE_P_INS_2_ML_VAL_A
			add constraint
			FKBD4D06EABBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>
		<statement>ALTER TABLE RS_DATASOURCE_P_INST_2_MUL_VAL RENAME TO
			DATASOURCE_P_INS_2_ML_VAL;
		</statement>
	</changeSet>
	<changeSet date="2011-09-08-10-00">
		<statement>
			create table RS_LIST_USERVARIABLE_DEF (
			id number(19,0) not
			null,
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_LIST_USERVARIABLE_DEF_A (
			id number(19,0)
			not null,
			REV number(10,0) not null,
			primary key (id, REV)
			);
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_DEF
			add constraint
			FK5C33E4F04500F7D7
			foreign key (id)
			references RS_USERVAR_DEF;
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_DEF_A
			add constraint
			FK1ECE74B2872FD3C
			foreign key (id, REV)
			references RS_USERVAR_DEF_A;
		</statement>
		<statement>
			create table RS_LIST_USERVARIABLE_INST (
			id number(19,0) not
			null,
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_LIST_USERVARIABLE_INST_A (
			id number(19,0)
			not null,
			REV number(10,0) not null,
			primary key (id, REV)
			);
		</statement>
		<statement>
			create table RS_LIST_USERVARIABLE_INST_VL (
			list_user_var_instanc_id number(19,0) not null,
			value varchar2(255
			char)
			);
		</statement>
		<statement>
			create table RS_LIST_USERVARIABLE_INST_VL_A (
			REV
			number(10,0) not null,
			list_user_var_instanc_id number(19,0) not null,
			value varchar2(255 char) not null,
			revtype number(3,0),
			primary key
			(REV, list_user_var_instanc_id, value)
			);
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_INST
			add constraint
			FK95E946DD649E9D59
			foreign key (id)
			references RS_USERVAR_INST;
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_INST_A
			add constraint
			FKC0B30F5FB73D4A3E
			foreign key (id, REV)
			references RS_USERVAR_INST_A;
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_INST_VL
			add constraint
			FK55AEDF581D1BF7F0
			foreign key (ListUserVariableInstance_id)
			references RS_LIST_USERVARIABLE_INST;
		</statement>
		<statement>
			alter table RS_LIST_USERVARIABLE_INST_VL_A
			add constraint
			FKA574751ABBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>
	</changeSet>
	<changeSet date="2011-09-11-19-12">
		<statement>alter table RS_CSV_DATASOURCE rename column SEPARATOR to
			SEPARATOR_FIELD;
		</statement>
		<statement>alter table RS_CSV_DATASOURCE_A rename column SEPARATOR to
			SEPARATOR_FIELD;
		</statement>
	</changeSet>
	<changeSet date="2011-09-11-21-00">
		<statement>alter table RS_TREEDB_SIMPLE_LOG_ENTRY drop column user_id;
		</statement>
		<statement>alter table RS_TREEDB_SIMPLE_LOG_ENTRY add username
			VARCHAR2(40 CHAR);
		</statement>
		<statement>alter table RS_TREEDB_SIMPLE_LOG_ENTRY_A drop column
			user_id;
		</statement>
		<statement>alter table RS_TREEDB_SIMPLE_LOG_ENTRY_A add username
			VARCHAR2(40 CHAR);
		</statement>
	</changeSet>
	<changeSet date="2011-09-23-00-00">
		<statement>create table RS_FILE_SERVER_FILE_DATA (ENTITY_ID
			number(19,0) not null, data blob, ENTITY_VERSION number(19,0),
			primary key (ENTITY_ID));
		</statement>
		<statement>create table RS_FILE_SERVER_FILE_DATA_A (ENTITY_ID
			number(19,0) not null, REV number(10,0) not null, revtype
			number(3,0), data blob, primary key (ENTITY_ID, REV) );
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE ADD file_data_id
			number(19,0);
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE_DATA ADD temp_id
			number(19,0);
		</statement>
		<statement>insert into RS_FILE_SERVER_FILE_DATA select
			HIBERNATE_SEQUENCE.nextVal, data, 0, ID from RS_FILE_SERVER_FILE;
		</statement>
		<statement>UPDATE RS_FILE_SERVER_FILE SET file_data_id = (SELECT
			ENTITY_ID FROM rs_file_server_file_data D WHERE d.temp_id =
			rs_file_server_file.id);
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE_DATA drop column temp_id;
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE DROP column data;
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE_A DROP column data;
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE_A ADD file_data_id
			number(19,0);
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE add constraint
			FK5F4B08F3151A196A foreign key (file_data_id) references
			RS_FILE_SERVER_FILE_DATA;
		</statement>
		<statement>alter table RS_FILE_SERVER_FILE_DATA_A add constraint
			FKA3AE3DB8BBD2403B foreign key (REV) references RS_REVISION;
		</statement>
	</changeSet>
	<changeSet date="2011-09-25-00-00">
		<statement>create table RS_REPORT_SS_STRING_PROPERTY (
			str_value clob,
			id number(19,0) not null,
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_REPORT_SS_STRING_PROPERTY_A (
			id
			number(19,0) not null,
			REV number(10,0) not null,
			str_value clob,
			primary key (id, REV)
			);
		</statement>
		<statement>
			alter table RS_REPORT_SS_STRING_PROPERTY
			add constraint
			FK3FCEDAD1AC280B11
			foreign key (id)
			references RS_REPORT_PROPERTY;
		</statement>
		<statement>
			alter table RS_REPORT_SS_STRING_PROPERTY_A
			add constraint
			FK87837653422229F6
			foreign key (id, REV)
			references
			RS_REPORT_PROPERTY_A;
		</statement>
	</changeSet>
	<changeSet date="2011-09-26-00-00">
		<statement>alter table RS_AUDIT_LOG_ENTRY ADD DATE_FIELD timestamp;
		</statement>
	</changeSet>
	<changeSet date="2011-10-06-12-00">
		<statement>
			insert into RS_ACL VALUES (HIBERNATE_SEQUENCE.nextVal, 0);
		</statement>
		<statement>
			insert into RS_GEN_SECURITY_TGT_ENTITY select
			HIBERNATE_SEQUENCE.nextVal,
			'SchedulingBasicSecurityTarget', 1,
			(select MAX(ENTITY_ID) FROM
			RS_ACL) from dual;
		</statement>
	</changeSet>
	<changeSet date="2011-10-11-12-00">
		<statement>
			create table RS_SCRIPT_REPORT (
			id number(19,0) not null,
			script_id number(19,0),
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_SCRIPT_REPORT_2_EX_FORMAT (
			script_report_id number(19,0) not null,
			export_formats varchar2(255
			char)
			);
		</statement>
		<statement>
			create table RS_SCRIPT_REPORT_2_EX_FORMAT_A (
			REV
			number(10,0) not null,
			script_report_id number(19,0) not null,
			export_formats varchar2(255 char) not null,
			revtype number(3,0),
			primary key (REV, script_report_id, export_formats)
			);
		</statement>
		<statement>
			create table RS_SCRIPT_REPORT_A (
			id number(19,0) not null,
			REV number(10,0) not null,
			script_id number(19,0),
			primary key (id,
			REV)
			);
		</statement>
		<statement>
			create table RS_SCRIPT_REPORT_VARIANT (
			id number(19,0) not
			null,
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_SCRIPT_REPORT_VARIANT_A (
			id number(19,0)
			not null,
			REV number(10,0) not null,
			primary key (id, REV)
			);
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT
			add constraint
			FK82EAEDAA11D85A1C
			foreign key (id)
			references RS_REPORT;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT
			add constraint
			FK82EAEDAA6CCC9622
			foreign key (script_id)
			references
			RS_FILE_SERVER_FILE;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT_2_EX_FORMAT
			add constraint
			FK84064221E2DCE189
			foreign key (script_report_id)
			references
			RS_SCRIPT_REPORT;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT_2_EX_FORMAT_A
			add constraint
			FK9B7E49A3BBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT_A
			add constraint
			FK73E636ECFCFAE241
			foreign key (id, REV)
			references RS_REPORT_A;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT_VARIANT
			add constraint
			FK8E97E6D0FE6FC512
			foreign key (id)
			references RS_SCRIPT_REPORT;
		</statement>
		<statement>
			alter table RS_SCRIPT_REPORT_VARIANT_A
			add constraint
			FK48397E92216367B7
			foreign key (id, REV)
			references RS_SCRIPT_REPORT_A;
		</statement>
	</changeSet>
	<changeSet date="2011-10-16">
		<statement>alter table RS_FILTER_2_EXCLUDE_VAL add val_n number(10,0);
		</statement>
		<statement>alter table RS_FILTER_2_EXCLUDE_VAL_A add val_n
			number(10,0);
		</statement>
		<statement>alter table RS_FILTER_2_EXCLUDE_VAL_A drop primary key;
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL add val_n number(10,0);
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL_A add val_n
			number(10,0);
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL_A drop primary key;
		</statement>

		<statement>declare
			cursor cursFilterId is select distinct filter_id
			from
			RS_FILTER_2_INCLUDE_VAL;
			var varchar2(255);
			BEGIN
			for cur in
			cursFilterId loop
			update RS_FILTER_2_INCLUDE_VAL o
			set val_n = (
			select
			num from (select rownum num, include_values from
			RS_FILTER_2_INCLUDE_VAL where filter_id = cur.filter_id ) sub where
			sub.include_values = o.include_values
			)
			where o.filter_id =
			cur.filter_id;
			end loop;
			END;
		</statement>

		<statement>declare
			cursor cursFilterId is select distinct filter_id
			from
			RS_FILTER_2_EXCLUDE_VAL;
			var varchar2(255);
			BEGIN
			for cur in
			cursFilterId loop
			update RS_FILTER_2_EXCLUDE_VAL o
			set val_n = (
			select
			num from (select rownum num, exclude_values from
			RS_FILTER_2_EXCLUDE_VAL where filter_id = cur.filter_id ) sub where
			sub.exclude_values = o.exclude_values
			)
			where o.filter_id =
			cur.filter_id;
			end loop;
			END;
		</statement>

		<statement>declare
			cursor cursFilterId is select distinct filter_id
			from
			RS_FILTER_2_INCLUDE_VAL_A;
			var varchar2(255);
			BEGIN
			for cur in
			cursFilterId loop
			update RS_FILTER_2_INCLUDE_VAL_A o
			set val_n = (
			select num from (select rownum num, include_values, rev from
			RS_FILTER_2_INCLUDE_VAL_A where filter_id = cur.filter_id ) sub where
			sub.include_values = o.include_values and sub.rev = o.rev
			)
			where
			o.filter_id = cur.filter_id;
			end loop;
			END;
		</statement>

		<statement>declare
			cursor cursFilterId is select distinct filter_id
			from
			RS_FILTER_2_EXCLUDE_VAL_A;
			var varchar2(255);
			BEGIN
			for cur in
			cursFilterId loop
			update RS_FILTER_2_EXCLUDE_VAL_A o
			set val_n = (
			select num from (select rownum num, exclude_values, rev from
			RS_FILTER_2_EXCLUDE_VAL_A where filter_id = cur.filter_id ) sub where
			sub.exclude_values = o.exclude_values and sub.rev = o.rev
			)
			where
			o.filter_id = cur.filter_id;
			end loop;
			END;
		</statement>

		<statement>alter table RS_FILTER_2_EXCLUDE_VAL modify val_n not null;
		</statement>
		<statement>alter table RS_FILTER_2_EXCLUDE_VAL_A modify val_n not
			null;
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL modify val_n not null;
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL_A modify val_n not
			null;
		</statement>

		<statement>alter table RS_FILTER_2_EXCLUDE_VAL add primary key
			(filter_id, val_n);
		</statement>
		<statement>alter table RS_FILTER_2_EXCLUDE_VAL_A add primary key (REV,
			filter_id, exclude_values, val_n);
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL add primary key
			(filter_id, val_n);
		</statement>
		<statement>alter table RS_FILTER_2_INCLUDE_VAL_A add primary key (REV,
			filter_id, include_values, val_n);
		</statement>
	</changeSet>
	<changeSet date="2011-10-17">
		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT add val_n
			number(10,0);
		</statement>
		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT_A add val_n
			number(10,0);
		</statement>
		<statement>declare
			cursor cursFilterId is select distinct
			script_report_id from
			RS_SCRIPT_REPORT_2_EX_FORMAT;
			var varchar2(255);
			BEGIN
			for cur in cursFilterId loop
			update RS_SCRIPT_REPORT_2_EX_FORMAT
			o
			set val_n = (
			select num from (select rownum num, export_formats from
			RS_SCRIPT_REPORT_2_EX_FORMAT where script_report_id =
			cur.script_report_id ) sub where sub.export_formats =
			o.export_formats
			)
			where o.script_report_id = cur.script_report_id;
			end
			loop;
			END;
		</statement>

		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT modify val_n not
			null;
		</statement>
		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT_A modify val_n not
			null;
		</statement>

		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT add primary key
			(script_report_id, val_n);
		</statement>
		<statement>alter table RS_SCRIPT_REPORT_2_EX_FORMAT_A add primary key
			(REV, script_report_id, export_formats, val_n);
		</statement>
	</changeSet>
	<changeSet date="2011-10-20-10-00">
		<statement>
			alter table RS_SCHED_EXECUTE_REPORT_JOB
			add constraint
			FK62D5EC22FCC8ED07
			foreign key (report_id)
			references RS_REPORT;
		</statement>
	</changeSet>
	<changeSet date="2011-10-25-10-00">
		<statement>
			alter table RS_PARAMETER_DEFINITION drop column required;
		</statement>
	</changeSet>
	<changeSet date="2011-11-03-10-00">
		<statement>
			drop table RS_CERTIFICATE_ENTRY cascade constraints;
		</statement>
		<statement>
			drop table RS_CERTIFICATE_ENTRY_A cascade constraints;
		</statement>
		<statement>
			drop table RS_KEY_STORE cascade constraints;
		</statement>
		<statement>
			drop table RS_KEY_STORE_A cascade constraints;
		</statement>
		<statement>
			alter table RS_TS_DISK_NODE_A add (created_on timestamp,
			last_updated
			timestamp, parent_id number(19,0));
		</statement>
		<statement>
			alter table RS_REPORT_MNGR_NODE_A add (created_on
			timestamp, last_updated
			timestamp, parent_id number(19,0));
		</statement>
		<statement>
			alter table RS_USERMANAGER_NODE_A add (created_on
			timestamp, last_updated
			timestamp, parent_id number(19,0));
		</statement>
		<statement>
			alter table RS_FILE_SERVER_NODE_A add (created_on
			timestamp, last_updated
			timestamp, parent_id number(19,0));
		</statement>
		<statement>
			alter table RS_DATASOURCE_MNGR_NODE_A add (created_on
			timestamp,
			last_updated timestamp, parent_id number(19,0));
		</statement>
		<statement>
			alter table RS_CSV_DATASOURCE_A add (connector_id
			number(19,0));
		</statement>
	</changeSet>
	<changeSet date="2011-11-10-08-44">
		<!-- RS441 -->
		<statement>
			DELETE FROM RS_GEN_SECURITY_TGT_ENTITY WHERE
			target_identifier =
			'ReportRepositorySecurityTarget';
		</statement>
	</changeSet>
	<changeSet date="2011-11-11-10-00">
		<!-- clean soft report link -->
		<statement>
			UPDATE RS_SOFT_REPORT_LINK SET REPORT_ID = null WHERE
			REPORT_ID NOT IN
			(SELECT ID FROM RS_REPORT);
		</statement>

		<!-- _________________________________________________________________ -->

		<!-- create new fields in condition -->
		<statement>
			alter table RS_CONDITION add (report_id number(19,0));
		</statement>

		<!-- copy references to condition -->
        <statement>
        UPDATE RS_CONDITION SET REPORT_ID = (
			SELECT REPORT_ID FROM
			RS_SOFT_REPORT_LINK WHERE ID =
			RS_CONDITION.REFERENCE_ID
			);
		</statement>

		<!-- drop reference col -->
		<statement>
			alter table RS_CONDITION drop column reference_id;
		</statement>

		<!-- add constraint on condition -->
		<statement>
			alter table RS_CONDITION
			add constraint FKD70F647DD2604354
			foreign key (report_id)
			references RS_TABLE_REPORT;
		</statement>

		<!-- ____________________________________________________ -->


		<!-- create new fields in disk reference -->
		<statement>
			alter table RS_TS_DISK_REPORT_REFERENCE add (hardlink
			number(1,0),
			report_id number(19,0));
		</statement>
		
		<statement>
			alter table RS_TS_DISK_REPORT_REFERENCE_A add (hardlink
			number(1,0),
			report_id number(19,0));
		</statement>

		<!-- copy references to disk_reference -->
		<statement>
			UPDATE RS_TS_DISK_REPORT_REFERENCE SET REPORT_ID = (
            SELECT
            REPORT_ID FROM RS_SOFT_REPORT_LINK WHERE ID =
            RS_TS_DISK_REPORT_REFERENCE.REFERENCE_ID
            ), hardlink =
            (SELECT
            hardlink FROM rs_ts_disk_report_link WHERE ID =
            RS_TS_DISK_REPORT_REFERENCE.REFERENCE_ID);
		</statement>

		<!-- drop reference col -->
		<statement>
			alter table RS_TS_DISK_REPORT_REFERENCE drop column
			reference_id;
		</statement>

		<!-- add constraint on report reference -->
		<statement>
			alter table RS_TS_DISK_REPORT_REFERENCE
			add constraint
			FK581E02C0FCC8ED07
			foreign key (report_id)
			references RS_REPORT;
		</statement>

		<!-- ___________________________________________________ -->
		<statement>
			drop table RS_SOFT_REPORT_LINK cascade constraints;
		</statement>

		<statement>
			drop table RS_SOFT_REPORT_LINK_A cascade constraints;
		</statement>

		<statement>
			drop table RS_OBJECT_LINK cascade constraints;
		</statement>

		<statement>
			drop table RS_OBJECT_LINK_A cascade constraints;
		</statement>


		<!-- _________________________________________________________ -->
		<statement>
			commit;
		</statement>
	</changeSet>
	<changeSet date="2011-11-12-19-44">
		<statement>
			alter table RS_PARAMETER_DEFINITION add (display_inline
			number(1,0) default 0);
		</statement>
		<statement>
		alter table RS_PARAMETER_DEFINITION_A add (display_inline
			number(1,0) default 0);
		</statement>
	</changeSet>
	<changeSet date="2011-11-14-11-45">
		<statement>
			alter table RS_DATETIME_PARAM_INST add(formula varchar2(255
			char));
		</statement>

		<statement>
			alter table RS_DATETIME_PARAM_INST_A add(formula
			varchar2(255 char));
		</statement>

		<statement>
			alter table RS_DATETIME_PARAM_DEF add(formula varchar2(255
			char));
		</statement>

		<statement>
			alter table RS_DATETIME_PARAM_DEF_A add(formula
			varchar2(255 char));
		</statement>
	</changeSet>
	<!-- removed scheduler teamspace app -->
	<changeSet date="2011-11-16-11-15">
		<statement>
			DELETE FROM RS_TEAMSPACE_2_APP WHERE apps_id in (SELECT
			ENTITY_ID FROM
			RS_TEAMSPACE_APP WHERE type =
			'tsApp-scheduledReports');
		</statement>

		<statement>
			DELETE FROM RS_TEAMSPACE_APP WHERE type =
			'tsApp-scheduledReports';
		</statement>
	</changeSet>
	<!-- removed important notice -->
	<changeSet date="2011-11-22-19-12">
		<statement>
			DELETE FROM RS_IMPORTANT_NOTICE;
		</statement>

		<statement>
			DELETE FROM RS_ACE_2_ACCESS_MAPS WHERE access_maps_id IN(
			SELECT ENTITY_ID FROM RS_ACE_ACCESS_MAP WHERE securee =
			'MessageCenterService_Securee'
			);
		</statement>

		<statement>
			DELETE FROM RS_ACE_ACCESS_MAP WHERE securee =
			'MessageCenterService_Securee';
		</statement>

		<statement>
			DELETE FROM RS_ACE_ACCESS_MAP_A WHERE securee =
			'MessageCenterService_Securee';
		</statement>

		<statement>
			drop table RS_IMPORTANT_NOTICE cascade constraints;
		</statement>

		<statement>
			drop table RS_IMPORTANT_NOTICE_A cascade constraints;
		</statement>

		<statement>
			Commit;
		</statement>
	</changeSet>
	<!-- RS-103 -->
	<changeSet date="2011-11-23-09-20">
		<statement>
			alter table RS_USERVAR_DEF add(description clob);
		</statement>
		<statement>
			alter table RS_USERVAR_DEF_A add(description clob);
		</statement>
	</changeSet>
	<!-- RS-511 -->
	<changeSet date="2011-11-23-16-07">
		<statement>
			alter table RS_USERMANAGER_NODE add(flags number(19,0)
			default 0 not
			null);
		</statement>
		<statement>
			alter table RS_USERMANAGER_NODE_A add(flags number(19,0)
			default 0);
		</statement>

		<statement>
			alter table RS_TS_DISK_NODE add(flags number(19,0) default
			0 not null);
		</statement>
		<statement>
			alter table RS_TS_DISK_NODE_A add(flags number(19,0)
			default 0);
		</statement>

		<statement>
			alter table RS_REPORT_MNGR_NODE add(flags number(19,0)
			default 0 not
			null);
		</statement>
		<statement>
			alter table RS_REPORT_MNGR_NODE_A add(flags number(19,0)
			default 0);
		</statement>

		<statement>
			alter table RS_FILE_SERVER_NODE add(flags number(19,0)
			default 0 not
			null);
		</statement>
		<statement>
			alter table RS_FILE_SERVER_NODE_A add(flags number(19,0)
			default 0);
		</statement>

		<statement>
			alter table RS_DATASOURCE_MNGR_NODE add(flags number(19,0)
			default 0 not
			null);
		</statement>
		<statement>
			alter table RS_DATASOURCE_MNGR_NODE_A add(flags
			number(19,0) default 0);
		</statement>
	</changeSet>
	<!-- RS-515 -->
	<changeSet date="2011-11-24-15-53">

		<statement>
			create table RS_GROUP_2_OU (
			group_id number(19,0) not null,
			ous_id number(19,0) not null,
			primary key (group_id, ous_id)
			);
		</statement>

		<statement>
			create table RS_GROUP_2_OU_A (
			REV number(10,0) not null,
			group_id number(19,0) not null,
			ous_id number(19,0) not null,
			revtype
			number(3,0),
			primary key (REV, group_id, ous_id)
			);
		</statement>

		<statement>
			alter table RS_GROUP_2_OU
			add constraint FK907E0FB1254763EF
			foreign key (ous_id)
			references RS_ORGANISATIONAL_UNIT;
		</statement>
		<statement>
			alter table RS_GROUP_2_OU
			add constraint FK907E0FB124824DC1
			foreign key (group_id)
			references RS_GROUP;
		</statement>
		<statement>
			alter table RS_GROUP_2_OU_A
			add constraint
			FK6938F333BBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>

	</changeSet>
	<changeSet date="2011-11-30-11-30">
		<statement>alter table RS_COLUMN add (subtotal_group number(1,0)
			default 0 not null);
		</statement>
		<statement>alter table RS_COLUMN add format_id number(19,0);
		</statement>
		<statement>alter table RS_COLUMN_A add (subtotal_group number(1,0));
		</statement>
		<statement>alter table RS_COLUMN_A add format_id number(19,0);
		</statement>
		<statement>alter table RS_TABLE_REPORT add (enable_subtotals
			number(1,0)
			default 0
			not null);
		</statement>
		<statement>alter table RS_TABLE_REPORT_A add ( enable_subtotals number(1,0));
		</statement>
		<statement>create table RS_COLUMN_FORMAT (
			ENTITY_ID number(19,0) not
			null,
			ENTITY_VERSION number(19,0),
			primary key (ENTITY_ID)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_A (
			ENTITY_ID number(19,0) not
			null,
			REV number(10,0) not null,
			revtype number(3,0),
			primary key
			(ENTITY_ID, REV)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_CURRENCY (
			currency_type
			number(10,0),
			id number(19,0) not null,
			primary key (id)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_CURRENCY_A (
			id number(19,0)
			not null,
			REV number(10,0) not null,
			currency_type number(10,0),
			primary key (id, REV)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_DATE (
			base_format
			varchar2(255 char),
			target_format varchar2(255 char),
			id number(19,0)
			not null,
			primary key (id)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_DATE_A (
			id number(19,0) not
			null,
			REV number(10,0) not null,
			base_format varchar2(255 char),
			target_format varchar2(255 char),
			primary key (id, REV)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_NUMBER (
			number_of_decimal_places number(10,0) not null,
			thousand_separator
			number(1,0) not null,
			type number(10,0),
			id number(19,0) not null,
			primary key (id)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_NUMBER_A (
			id number(19,0) not
			null,
			REV number(10,0) not null,
			number_of_decimal_places number(10,0),
			thousand_separator number(1,0),
			type number(10,0),
			primary key (id,
			REV)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_TEXT (
			template varchar2(255
			char),
			id number(19,0) not null,
			primary key (id)
			);
		</statement>
		<statement>create table RS_COLUMN_FORMAT_TEXT_A (
			id number(19,0) not
			null,
			REV number(10,0) not null,
			template varchar2(255 char),
			primary
			key (id, REV)
			);
		</statement>

		<statement>alter table RS_COLUMN
			add constraint FK442EDF14A3DAB6D3
			foreign key (format_id)
			references RS_COLUMN_FORMAT;
		</statement>

	</changeSet>
	<changeSet date="2011-11-30-12-56">
		<statement>
			create table RS_DATABASE_BUNDLE_ENTRY (
			ENTITY_ID
			number(19,0) not null,
			KEY_FIELD varchar2(255 char),
			ENTITY_VERSION
			number(19,0),
			database_id number(19,0),
			primary key (ENTITY_ID)
			);
		</statement>
		<statement>
			create table RS_DATABASE_BUNDLE_ENTRY_A (
			ENTITY_ID
			number(19,0) not null,
			REV number(10,0) not null,
			revtype number(3,0),
			KEY_FIELD varchar2(255 char),
			database_id number(19,0),
			primary key
			(ENTITY_ID, REV)
			);
		</statement>
		<statement>
			create table RS_DB_BUNDLE_DATASOURCE (
			id number(19,0) not
			null,
			primary key (id)
			);
		</statement>
		<statement>
			create table RS_DB_BUNDLE_DATASOURCE_A (
			id number(19,0) not
			null,
			REV number(10,0) not null,
			primary key (id, REV)
			);
		</statement>
		
		<statement>
			alter table RS_DATABASE_BUNDLE_ENTRY
			add constraint
			FKD27D4B1BF9681875
			foreign key (database_id)
			references
			RS_DATABASE_DATASOURCE;
		</statement>
		<statement>
			alter table RS_DATABASE_BUNDLE_ENTRY_A
			add constraint
			FK2856FC1DBBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>

		<statement>
			create table RS_DB_BUNDLE_2_ENTRY (
			db_bundle_datasource_id
			number(19,0) not null,
			bundle_entries_id number(19,0) not null,
			primary key (db_bundle_datasource_id, bundle_entries_id),
			unique
			(bundle_entries_id)
			);
		</statement>
		<statement>
			create table RS_DB_BUNDLE_2_ENTRY_A (
			REV number(10,0) not
			null,
			db_bundle_datasource_id number(19,0) not null,
			bundle_entries_id
			number(19,0) not null,
			revtype number(3,0),
			primary key (REV,
			db_bundle_datasource_id, bundle_entries_id)
			);

		</statement>
		<statement>

			alter table RS_DB_BUNDLE_2_ENTRY
			add constraint
			FK14C10EAB441ED5AE
			foreign key (db_bundle_datasource_id)
			references
			RS_DB_BUNDLE_DATASOURCE;
		</statement>
		<statement>
			alter table RS_DB_BUNDLE_2_ENTRY
			add constraint
			FK14C10EAB4FB99E44
			foreign key (bundle_entries_id)
			references
			RS_DATABASE_BUNDLE_ENTRY;
		</statement>
		<statement>
			alter table RS_DB_BUNDLE_2_ENTRY_A
			add constraint
			FKE8B81BADBBD2403B
			foreign key (REV)
			references RS_REVISION;
		</statement>
		<statement>

			alter table RS_DB_BUNDLE_DATASOURCE
			add constraint FK5863771CC8BD7B31
			foreign key (id)
			references RS_DATABASE_DATASOURCE;
		</statement>
		<statement>
			alter table RS_DB_BUNDLE_DATASOURCE_A
			add constraint FKCD622BDE8F1C1216
			foreign key (id, REV)
			references RS_DATABASE_DATASOURCE_A;
		</statement>
	</changeSet>
   <changeSet date="2011-12-06-09-45">
        <statement>
        alter table RS_COLUMN_FORMAT_DATE add (
            roll_over number(1,0) default 0 not null,
            error_replacement varchar2(255 char),
            replace_errors number(1,0) default 0 not null
        );
        </statement>
        <statement>
        alter table RS_COLUMN_FORMAT_DATE_A add (
            roll_over number(1,0) default 0,
            error_replacement varchar2(255 char),
            replace_errors number(1,0) default 0
        );
        </statement>
    </changeSet>
    
    
    <!-- General Disk and Report Reference -->
    
    <changeSet date="2012-01-26-13-10">
        <statement>
          INSERT INTO RS_TS_DISK_GENERAL_REFERENCE  (id, description, NAME_FIELD) SELECT id, description, NAME_FIELD FROM RS_TS_DISK_REPORT_REFERENCE;
        </statement>
        <statement>
          INSERT INTO RS_TS_DISK_GENERAL_REFERENCE_A  (id, REV, description, NAME_FIELD) SELECT id, REV, description, NAME_FIELD FROM RS_TS_DISK_REPORT_REFERENCE_A;
        </statement>
        <statement>
          ALTER TABLE RS_TS_DISK_REPORT_REFERENCE DROP column description;
        </statement>
        <statement>
          ALTER TABLE RS_TS_DISK_REPORT_REFERENCE DROP column NAME_FIELD;
        </statement>
        <statement>
          ALTER TABLE RS_TS_DISK_REPORT_REFERENCE_A DROP column description;
        </statement>
        <statement>
          ALTER TABLE RS_TS_DISK_REPORT_REFERENCE_A DROP column NAME_FIELD;
        </statement>
    </changeSet>
    
    <!-- Hierarchical ACLs -->
    <changeSet date="2012-01-26-16-10">
      <statement>
	    create table RS_HIERARCHICAL_ACL (
	        id number(19,0) not null,
	        primary key (id)
	    );
     </statement>
     <statement>
	    create table RS_HIERARCHICAL_ACL_A (
	        id number(19,0) not null,
	        REV number(10,0) not null,
	        primary key (id, REV)
	    );
      </statement>
      <statement>
        INSERT INTO RS_HIERARCHICAL_ACL (id) SELECT ACL_ID FROM (   
            SELECT ACL_ID FROM RS_REPORT_MNGR_NODE
            UNION
            SELECT ACL_ID FROM RS_DATASOURCE_MNGR_NODE
            UNION
            SELECT ACL_ID FROM RS_FILE_SERVER_NODE
            UNION
            SELECT ACL_ID FROM RS_USERMANAGER_NODE
        ) WHERE NOT ACL_ID IS NULL;  
      </statement>
      <statement>
        INSERT INTO RS_HIERARCHICAL_ACL_A (id, rev) SELECT ENTITY_ID, rev FROM RS_ACL_A WHERE ENTITY_ID IN(   
            SELECT ACL_ID FROM RS_REPORT_MNGR_NODE
            UNION
            SELECT ACL_ID FROM RS_DATASOURCE_MNGR_NODE
            UNION
            SELECT ACL_ID FROM RS_FILE_SERVER_NODE
            UNION
            SELECT ACL_ID FROM RS_USERMANAGER_NODE
        ) AND NOT ENTITY_ID IS NULL;    
      </statement>
    </changeSet>
    
    <!-- Null Format -->
    <changeSet date="2012-01-30-13-00">
        <statement>
        	ALTER TABLE RS_COLUMN add (null_replacement_format varchar2(255 char) default 'NULL');
        </statement>
        <statement>
        	ALTER TABLE RS_COLUMN_A add (null_replacement_format varchar2(255 char) default 'NULL');
        </statement>
    </changeSet>

    <!-- Remove Cache -->
    <changeSet date="2012-03-09-11-19">
        <statement>
            DROP TABLE RS_REPORT_CACHE_ENTRY;
        </statement>
    </changeSet>
    
    <!-- Log Action Length -->
    <changeSet date="2012-03-23-11-19">
        <statement>
            ALTER TABLE RS_AUDIT_LOG_ENTRY MODIFY (action varchar2(64 char));
        </statement>
    </changeSet>

    <!-- RS-888 -->
    <changeSet date="2012-04-28-20-00">
        <statement>
            ALTER TABLE RS_SCRIPT_REPORT add (arguments varchar2(255 char));
        </statement>
       <statement>
            ALTER TABLE RS_SCRIPT_REPORT_A add (arguments varchar2(255 char));
        </statement>
    </changeSet>
 
       <!-- RS-965, RS-966 -->
    <changeSet date="2012-10-12-08-30">
        <statement>
            ALTER TABLE RS_DATASOURCE_PARAM_DEF add (multi_selection_mode integer default 0);
        </statement>
         <statement>
             ALTER TABLE RS_DATASOURCE_PARAM_DEF_A add (multi_selection_mode integer default 0);
        </statement>
        <statement>
            ALTER TABLE RS_DATASOURCE_PARAM_DEF add (box_layout_mode integer default 0);
        </statement>
         <statement>
             ALTER TABLE RS_DATASOURCE_PARAM_DEF_A add (box_layout_mode integer default 0);
        </statement>
        <statement>
            ALTER TABLE RS_DATASOURCE_PARAM_DEF add (box_layout_pack_mode integer default 0);
        </statement>
         <statement>
             ALTER TABLE RS_DATASOURCE_PARAM_DEF_A add (box_layout_pack_mode integer default 0);
        </statement>
        <statement>
            ALTER TABLE RS_DATASOURCE_PARAM_DEF add (box_layout_pack_col_size integer default 1);
        </statement>
         <statement>
             ALTER TABLE RS_DATASOURCE_PARAM_DEF_A add (box_layout_pack_col_size integer default 1);
        </statement>
    </changeSet>
 
    <!-- RS-852 -->
    <changeSet date="2012-11-01-10-10">
        <statement>
            ALTER TABLE RS_FILTER_BLOCK drop column block_type;
        </statement>
        <statement>
            ALTER TABLE RS_FILTER_BLOCK_A drop column block_type;
        </statement>
        <statement>
            ALTER TABLE RS_PRE_FILTER add (root_block_type integer default 0);
        </statement>
        <statement>
            ALTER TABLE RS_PRE_FILTER_A add (root_block_type integer default 0);
        </statement>
    </changeSet>
    
    <!-- RS-1050 -->
    <changeSet date="2012-11-01-10-30">
        <statement>
            DROP TABLE RS_MESSAGE_2_RECIPIENT;
        </statement>
        <statement>
            DROP TABLE RS_MESSAGE_2_RECIPIENT_A;
        </statement>
        <statement>
            DROP TABLE RS_MESSAGE_RECIPIENT;
        </statement>
        <statement>
            DROP TABLE RS_MESSAGE_RECIPIENT_A;
        </statement>
        <statement>
            DROP TABLE RS_MESSAGE;
        </statement>
        <statement>
            DROP TABLE RS_MESSAGE_A;
        </statement>
        <statement>
            DELETE FROM RS_ACL WHERE ENTITY_ID IN (SELECT ACL_ID FROM RS_GEN_SECURITY_TGT_ENTITY WHERE TARGET_IDENTIFIER = 'MessageCenterSecurityTarget') CASCADE CONSTRAINTS
        </statement>
        <statement>
            DELETE FROM RS_ACL WHERE ENTITY_ID IN (SELECT ACL_ID FROM RS_GEN_SECURITY_TGT_ENTITY_A WHERE TARGET_IDENTIFIER = 'MessageCenterSecurityTarget') CASCADE CONSTRAINTS
        </statement>
        <statement>
            DELETE FROM RS_GEN_SECURITY_TGT_ENTITY WHERE
            target_identifier =
            'MessageCenterSecurityTarget';
        </statement>
        <statement>
            DELETE FROM RS_GEN_SECURITY_TGT_ENTITY_A WHERE
            target_identifier =
            'MessageCenterSecurityTarget';
        </statement>
    </changeSet>
    
    <!-- RS-967 -->
    <changeSet date="2012-11-01-19-30">
        <statement>ALTER TABLE RS_DATASOURCE_PARAM_DEF ADD (POST_PROCESS CLOB);</statement>
        <statement>ALTER TABLE RS_DATASOURCE_PARAM_DEF_A ADD (POST_PROCESS CLOB);</statement>
    </changeSet>
    
    <changeSet date="2012-11-23-14-30">
        <statement>DROP TABLE RS_TREEDB_SIMPLE_LOG_ENTRY;</statement>
    </changeSet>
    
    <!-- RS-1187 -->
    <changeSet date="2013-02-01-15-30">
        <statement>
			CREATE TABLE RS_DADGET_STATIC_HTML (
			  title varchar2(128 char),
			  data clob,
			  id number(19,0) not null,
			  PRIMARY KEY (id)
			) 
		<!-- Constarints fehlen -->
        </statement>
    </changeSet>
    
    <!-- RS-799 -->
    <changeSet date="2013-02-01-22-30">
        <statement>
			<statement>ALTER TABLE RS_CSV_DATASOURCE ADD (DATABASE_CACHE number(10,0) DEFAULT -1);</statement>
        	<statement>ALTER TABLE RRS_CSV_DATASOURCEF_A ADD (DATABASE_CACHE number(10,0) DEFAULT -1);</statement>
        	<statement>ALTER TABLE RS_SCRIPT_DATASOURCE ADD (DATABASE_CACHE number(10,0) DEFAULT -1);</statement>
        	<statement>ALTER TABLE RS_SCRIPT_DATASOURCE_A ADD (DATABASE_CACHE number(10,0) DEFAULT -1);</statement>
        </statement>
    </changeSet>

	<!-- RS-1190 -->
	<changeSet date="2013-02-02-12-00">
		<statement>
			insert into RS_ACL VALUES (HIBERNATE_SEQUENCE.nextVal, 0);
		</statement>
		<statement>
			insert into RS_GEN_SECURITY_TGT_ENTITY select
			HIBERNATE_SEQUENCE.nextVal,
			'DashboardViewSecurityTarget', 1,
			(select MAX(ENTITY_ID) FROM
			RS_ACL) from dual;
		</statement>
	</changeSet>
	
	<!-- RS-1204 -->
	<changeSet date="2013-02-08-12-00">
		<statement>
		    create table RS_DASHBOARD_MNGR_NODE (
		        ENTITY_ID number(19,0) not null,
		        created_on timestamp,
		        last_updated timestamp,
		        position number(10,0) not null,
		        ENTITY_VERSION number(19,0),
		        parent_id number(19,0),
		        acl_id number(19,0),
		        owner_id number(19,0),
		        primary key (ENTITY_ID)
		    );
		</statement>
		<statement>
		    create table RS_DASHBOARD_MNGR_NODE_A (
		        ENTITY_ID number(19,0) not null,
		        REV number(10,0) not null,
		        revtype number(3,0),
		        acl_id number(19,0),
		        owner_id number(19,0),
		        primary key (ENTITY_ID, REV)
		    );
		</statement>
		<statement>
		    create table RS_DASHBOARD_FOLDER (
       			description clob,
		        NAME_FIELD varchar2(128 char),
		        id number(19,0) not null,
		        primary key (id)
		    );
		</statement>
		<statement>
		    create table RS_DASHBOARD_FOLDER_A (
		        id number(19,0) not null,
		        REV number(10,0) not null,
		        description clob,
		        NAME_FIELD varchar2(128 char),
		        primary key (id, REV)
		    );
		</statement>
		<statement>
		 create table RS_DASHBOARD_DADGET_NODE (
       			description clob,
		        NAME_FIELD varchar2(128 char),
		        id number(19,0) not null,
		        primary key (id)
		    );
		</statement>
		<statement>
		 create table RS_DASHBOARD_DADGET_NODE_A (
		        id number(19,0) not null,
		        REV number(10,0) not null,
		        description clob,
		        NAME_FIELD varchar2(128 char),
		        primary key (id, REV)
		    );
		</statement>
		
		<statement>
			insert into RS_ACL VALUES (HIBERNATE_SEQUENCE.nextVal, 0);
		</statement>
		<statement>
			insert into RS_GEN_SECURITY_TGT_ENTITY select
			HIBERNATE_SEQUENCE.nextVal,
			'DashboardAdminSecurityTarget', 1,
			(select MAX(ENTITY_ID) FROM
			RS_ACL) from dual;
		</statement>
	</changeSet>
	
		<!-- RS- -->
	<changeSet date="2013-18-02-12-00">
		<statement>
			insert into RS_ACL VALUES (HIBERNATE_SEQUENCE.nextVal, 0);
		</statement>
		<statement>
			insert into RS_GEN_SECURITY_TGT_ENTITY select
			HIBERNATE_SEQUENCE.nextVal,
			'AccessRsSecurityTarget', 1,
			(select MAX(ENTITY_ID) FROM
			RS_ACL) from dual;
		</statement>
	</changeSet>
</dwSchemaUpdate>